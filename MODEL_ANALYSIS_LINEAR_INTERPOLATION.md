# 성장 기업 예측 모델 분석 보고서 (선형보간법 데이터)

## 📊 실행 일자
- 분석 일자: 2026년 1월 14일
- 모델 버전: 하이퍼파라미터 튜닝 적용 버전
- 데이터 버전: 선형보간법 결측치 보완 데이터

---

## 🎯 프로젝트 목표

**목표**: 선형보간법으로 결측치를 보완한 재무데이터를 기반으로 2024년 매출액 성장률이 상위 30%에 속할 기업을 예측

**데이터 특징**:
- 결측치 처리 방법: 선형보간법 (Linear Interpolation)
- 시계열 데이터의 연속성을 유지하면서 결측치 보완
- 기업별, 연도별 추세를 반영한 보간

---

## 📈 전체 프로세스 흐름

```
[1단계] 피처 생성 (field_per_feture.py)
    ↓
전체기업_재무데이터_선형보간.csv (선형보간법 적용)
    ↓
롤링 패널 방식으로 피처 생성
    ↓
growth_features_rolling_주원.csv (2,235개 샘플, 12개 피처)
    ↓
[2단계] 타겟 변수 생성 (모델링 코드 내부)
    ↓
각 연도별 매출액 성장률 계산 → 상위 30% 기준으로 이진 분류
    ↓
[3단계] 하이퍼파라미터 튜닝 (Optuna)
    ↓
50 trials로 최적 파라미터 탐색
    ↓
[4단계] 모델 학습 (LightGBM / XGBoost)
    ↓
Train: 2019~2022년 말 피처
Test: 2023년 말 피처 → 2024년 예측 (402개)
    ↓
[5단계] 예측 결과 및 평가
    ↓
test_predictions_2024_주원.csv (2024년 상위 30% 기업 예측)
```

---

## 🔄 데이터 구조

### 사용된 데이터 파일

| 데이터 타입 | 파일명 | 설명 |
|------------|--------|------|
| 피처 데이터 | `growth_features_rolling_주원.csv` | 롤링 패널 방식으로 생성된 피처 (2,235개 샘플) |
| 재무정보 데이터 | `전체기업_재무데이터_선형보간.csv` | 선형보간법으로 결측치 보완된 재무데이터 (4,023개) |

### 선형보간법 (Linear Interpolation) 개요

**방법론**:
- 시계열 데이터에서 결측값을 앞뒤 값의 선형 보간으로 채움
- 연도별 추세를 유지하면서 결측치 보완
- 기업별로 독립적으로 보간 수행

**장점**:
- 시계열의 연속성 유지
- 단순하고 해석 가능한 방법
- 계산 비용이 낮음

**단점**:
- 긴 구간의 결측치는 부정확할 수 있음
- 급격한 변화를 반영하지 못할 수 있음

### 데이터 분할
- **Train 데이터**: 1,964개 (2019~2022년 말 피처)
  - Train/Validation 분리: 80/20
- **Test 데이터**: 402개 (2023년 말 피처 → 2024년 예측)

---

## 📊 사용된 피처 (12개)

### 성장 관련 피처
1. **revenue_t1**: 현재 규모 (feature_year 매출액)
2. **cagr_2y**: 중기 성장 속도 (2년간 연평균 성장률)
3. **growth_recent**: 최근 모멘텀 (최근 1년간 성장률)
4. **growth_acceleration**: 성장 가속/감속
5. **growth_volatility**: 성장 안정성 (성장률 변동성)

### 수익성 관련 피처
6. **profitable_years**: 수익 안정성 (최근 2년 중 영업이익 > 0인 연도 수)
7. **operating_margin**: 영업이익률 (영업이익 / 매출액)

### 투자 관련 피처
8. **capex_intensity**: 투자 강도 (CAPEX / 매출액)
9. **capex_trend**: 투자 추세 (CAPEX 증가/감소 추세)
10. **capex_vs_industry**: 업종 대비 투자 수준

### 재무 안정성 관련 피처
11. **debt_ratio**: 부채비율 (부채총계 / 자본총계)
12. **rnd_intensity**: R&D 집중도 (연구개발비 / 매출액)

---

## 🎛️ 하이퍼파라미터 튜닝

### 튜닝 방법
- **라이브러리**: Optuna (Bayesian Optimization)
- **목표 지표**: ROC-AUC (최대화)
- **Trials**: 50회
- **검증 방법**: Validation Set을 사용한 Early Stopping

### LightGBM 최적 하이퍼파라미터 (선형보간법 데이터)

```
objective: binary
metric: binary_logloss
boosting_type: gbdt
num_leaves: 82
learning_rate: 0.0927
feature_fraction: 0.6152
bagging_fraction: 0.8448
bagging_freq: 6
min_child_samples: 42
min_child_weight: 0.4020
reg_alpha: 2.0887
reg_lambda: 1.7323
max_depth: 7
random_state: 42
```

**주요 특징**:
- 높은 학습률 (0.0927)로 빠른 학습
- 많은 잎 노드 (num_leaves: 82)로 복잡한 패턴 학습
- 중간 수준의 정규화 (reg_alpha: 2.09, reg_lambda: 1.73)

### XGBoost 최적 하이퍼파라미터 (선형보간법 데이터)

```
objective: binary:logistic
eval_metric: logloss
booster: gbtree
max_depth: 8
learning_rate: 0.2218
subsample: 0.8202
colsample_bytree: 0.6276
min_child_weight: 0.2129
gamma: 0.2690
reg_alpha: 0.0223
reg_lambda: 1.2597
random_state: 42
```

**주요 특징**:
- 중간 깊이 트리 (max_depth: 8)로 복잡한 패턴 학습
- 높은 학습률 (0.2218)로 빠른 학습
- 중간 수준의 정규화 (reg_lambda: 1.26)

---

## 📈 모델 성능 분석 (선형보간법 데이터)

### LightGBM 모델 성능 (2023년 말 피처 → 2024년 예측)

| 지표 | 값 | 해석 |
|------|-----|------|
| **Accuracy** | 70.40% | 전체 예측 중 70.40% 정확 |
| **Precision** | 63.16% | 상위 30%로 예측한 것 중 63.16%가 실제 상위 30% |
| **Recall** | 9.68% | 실제 상위 30% 중 9.68%를 찾아냄 |
| **F1-Score** | 16.78% | Precision과 Recall의 균형 |
| **ROC-AUC** | 0.6383 | 랜덤(0.5)보다 우수한 분류 능력 |

**Confusion Matrix**:
```
                예측
실제      하위 70%   상위 30%
하위 70%    271        7
상위 30%    112       12
```

- **True Positive (12)**: 상위 30%를 정확히 예측
- **False Negative (112)**: 상위 30%를 놓침 (개선 필요)
- **False Positive (7)**: 하위 70%를 상위로 잘못 예측 (매우 낮음)
- **True Negative (271)**: 하위 70%를 정확히 예측

**예측 분포**:
- 상위 30%로 예측: 19개
- 실제 상위 30%: 124개
- 총 기업 수: 402개

**특징**:
- **Precision이 매우 높음** (63.16%): 상위 30%로 예측한 기업 중 실제로 상위 30%인 비율이 높음
- **Recall이 매우 낮음** (9.68%): 실제 상위 30% 기업의 대부분을 놓침
- **False Positive가 매우 낮음** (7개): 잘못된 긍정 예측이 적어 신뢰도 높음

### XGBoost 모델 성능 (2023년 말 피처 → 2024년 예측)

| 지표 | 값 | 해석 |
|------|-----|------|
| **Accuracy** | 68.91% | 전체 예측 중 68.91% 정확 |
| **Precision** | 48.39% | 상위 30%로 예측한 것 중 48.39%가 실제 상위 30% |
| **Recall** | 12.10% | 실제 상위 30% 중 12.10%를 찾아냄 |
| **F1-Score** | 19.35% | Precision과 Recall의 균형 |
| **ROC-AUC** | 0.5888 | 랜덤(0.5)보다 우수한 분류 능력 |

**Confusion Matrix**:
```
                예측
실제      하위 70%   상위 30%
하위 70%    262       16
상위 30%    109       15
```

- **True Positive (15)**: 상위 30%를 정확히 예측
- **False Negative (109)**: 상위 30%를 놓침
- **False Positive (16)**: 하위 70%를 상위로 잘못 예측
- **True Negative (262)**: 하위 70%를 정확히 예측

**예측 분포**:
- 상위 30%로 예측: 31개
- 실제 상위 30%: 124개
- 총 기업 수: 402개

### 모델 비교 (선형보간법 데이터)

| 지표 | LightGBM | XGBoost | 우수 모델 |
|------|----------|---------|----------|
| Accuracy | 70.40% | 68.91% | **LightGBM** |
| Precision | 63.16% | 48.39% | **LightGBM** |
| Recall | 9.68% | 12.10% | **XGBoost** |
| F1-Score | 16.78% | 19.35% | **XGBoost** |
| ROC-AUC | 0.6383 | 0.5888 | **LightGBM** |

**종합 평가**:
- **LightGBM**: Accuracy, Precision, ROC-AUC에서 우수 → 정확한 예측에 강점, 높은 신뢰도
- **XGBoost**: Recall과 F1-Score에서 우수 → 더 많은 상위 30% 기업을 찾아냄

---

## 🔍 선형보간법 데이터의 특징 분석

### 데이터 품질

**장점**:
1. **연속성 유지**: 시계열 데이터의 연속성이 보존됨
2. **추세 반영**: 기업별 성장 추세가 보간에 반영됨
3. **단순성**: 해석이 용이하고 계산 비용이 낮음

**단점**:
1. **제한적 정보**: 실제 데이터가 아닌 추정값 사용
2. **변동성 과소평가**: 급격한 변화를 반영하지 못할 수 있음
3. **긴 구간 결측**: 연속된 여러 연도의 결측치는 부정확할 수 있음

### 모델 성능에 미친 영향

**Precision 향상**:
- 선형보간법으로 보완된 데이터가 일관성 있어 모델이 더 정확한 예측 가능
- False Positive가 매우 낮음 (LightGBM: 7개, XGBoost: 16개)

**Recall 저하**:
- 보간된 데이터가 실제 패턴을 완전히 반영하지 못해 일부 상위 30% 기업을 놓침
- 실제 상위 30% 124개 중 LightGBM은 12개만 찾아냄

---

## 💡 모델 해석 및 활용 방법

### 예측 확률 해석

**predicted_probability** 값에 따른 해석:

| 확률 범위 | 해석 | 행동 권장사항 |
|----------|------|--------------|
| 0.7 이상 | 매우 높은 확률로 상위 30% | 투자 후보 1순위, 집중 검토 |
| 0.5~0.7 | 상위 30% 가능성 있음 | 추가 검토 필요, 리스크 관리 |
| 0.3~0.5 | 불확실 | 신중한 판단 필요 |
| 0.3 미만 | 하위 70% 가능성 높음 | 우선순위 낮음 |

### 실제 활용 시나리오

#### 시나리오 1: 고신뢰도 투자 포트폴리오 구성
```
1. LightGBM 모델 사용 (Precision 63.16%)
2. predicted_probability가 0.7 이상인 기업만 선정
3. False Positive가 매우 낮아 신뢰도 높음
4. 소수의 고품질 기업에 집중 투자
```

#### 시나리오 2: 넓은 범위 탐색
```
1. XGBoost 모델 사용 (Recall 12.10%)
2. predicted_probability가 0.4 이상인 기업 검토
3. 더 많은 후보 기업 발굴
4. 추가 검증 후 투자 결정
```

---

## 📊 선형보간법 vs 기존 방법 비교

### 데이터 처리 방법 비교

| 항목 | 기존 방법 | 선형보간법 |
|------|----------|-----------|
| 결측치 처리 | 다른 방법 (미상) | 선형보간법 |
| 데이터 연속성 | - | 유지됨 |
| 추세 반영 | - | 반영됨 |
| 계산 복잡도 | - | 낮음 |

### 모델 성능 비교 (참고)

**주의**: 기존 방법과 직접 비교는 어렵지만, 선형보간법 데이터의 특징을 분석

**선형보간법 데이터 특징**:
- Precision이 높아 신뢰도 높은 예측 가능
- Recall이 낮아 많은 기업을 놓칠 수 있음
- False Positive가 낮아 리스크 관리에 유리

---

## 🎯 모델의 강점과 한계

### 강점

1. **높은 Precision**
   - LightGBM: 63.16%의 높은 Precision
   - 상위 30%로 예측한 기업 중 실제 상위 30% 비율이 높음
   - 신뢰도 높은 투자 후보 선정 가능

2. **낮은 False Positive**
   - LightGBM: 7개만 잘못 예측
   - 하위 70% 기업을 상위로 잘못 예측하는 경우가 적음
   - 리스크 관리에 유리

3. **선형보간법의 일관성**
   - 시계열 연속성이 유지되어 모델 학습에 도움
   - 추세가 반영된 데이터로 안정적인 학습

### 한계 및 개선 필요 사항

1. **Recall이 매우 낮음**
   - LightGBM: 9.68%, XGBoost: 12.10%
   - 실제 상위 30% 기업의 약 90%를 놓침
   - **개선 방안**: 임계값 조정, 피처 추가, 앙상블 모델

2. **False Negative가 많음**
   - LightGBM: 112개, XGBoost: 109개
   - 상위 30% 기업을 놓치는 경우가 많음
   - **개선 방안**: Recall 향상을 위한 모델 개선

3. **선형보간법의 한계**
   - 급격한 변화를 반영하지 못할 수 있음
   - 긴 구간의 결측치는 부정확할 수 있음
   - **개선 방안**: 다른 결측치 처리 방법과 비교 검토

---

## 🔧 개선 방안

### 단기 개선 방안

1. **임계값 조정**
   - 현재: 0.5 기준
   - 개선: Recall 향상을 위해 0.4~0.45로 조정 검토
   - Precision과 Recall의 균형 고려

2. **피처 추가**
   - 업종별 성장률
   - 시장 점유율
   - 경영진 변동
   - 특허 수

3. **앙상블 모델**
   - LightGBM + XGBoost 앙상블
   - Voting 또는 Stacking 적용
   - Precision과 Recall의 균형 개선

### 중장기 개선 방안

1. **결측치 처리 방법 비교**
   - 선형보간법 vs 다른 방법 (KNN, Forward Fill 등)
   - 각 방법의 모델 성능 비교
   - 최적 방법 선택

2. **딥러닝 모델 시도**
   - Neural Network 기반 모델
   - TabNet, NODE 등
   - 시계열 특성 반영

3. **외부 데이터 통합**
   - 뉴스 감성 분석
   - SNS 데이터
   - 산업 동향 데이터

---

## 📝 결론 및 권장사항

### 주요 결론

1. **모델 성능**
   - 하이퍼파라미터 튜닝으로 성능 개선
   - LightGBM이 Precision에서 우수 (63.16%)
   - XGBoost가 Recall에서 우수 (12.10%)

2. **선형보간법 데이터의 영향**
   - 높은 Precision과 낮은 False Positive
   - 낮은 Recall로 인한 많은 False Negative
   - 신뢰도 높은 예측이 가능하나 많은 기업을 놓칠 수 있음

3. **비즈니스 활용**
   - 고신뢰도 투자 후보 선정에 활용 가능
   - 소수의 고품질 기업에 집중 투자 전략에 적합
   - 확률 기반 리스크 관리 가능

### 권장 모델

**LightGBM 모델 권장**:
- Precision이 매우 높아 (63.16%) 신뢰도 높은 예측
- False Positive가 매우 낮아 (7개) 리스크 관리에 유리
- ROC-AUC가 더 높음 (0.6383)

**활용 시나리오**:
- **고신뢰도 투자**: LightGBM 사용, predicted_probability 0.7 이상 기업만 선정
- **넓은 범위 탐색**: XGBoost 사용, predicted_probability 0.4 이상 기업 검토
- **최고 성능**: 두 모델 앙상블 사용

### 선형보간법 데이터의 활용 가이드

**적합한 경우**:
- 신뢰도 높은 예측이 중요한 경우
- 소수의 고품질 기업에 집중 투자하는 경우
- False Positive를 최소화해야 하는 경우

**주의가 필요한 경우**:
- 많은 기업을 찾아내는 것이 중요한 경우
- Recall이 중요한 비즈니스 목표인 경우
- 급격한 변화를 반영해야 하는 경우

---

## 📎 참고 자료

- 피처 생성 코드: `feature/field_per/field_per_feture.py`
- LightGBM 모델: `model/LightGBM/LightGBM.py`
- XGBoost 모델: `model/XGBoost/XGBoost.py`
- 최적 하이퍼파라미터: `model/*/best_params.txt`
- 예측 결과: `model/*/test_predictions_2024_주원.csv`
- 사용 데이터:
  - 피처: `data/growth_features_rolling_주원.csv`
  - 재무정보: `data/전체기업_재무데이터_선형보간.csv`

---

**작성일**: 2026년 1월 14일  
**모델 버전**: 하이퍼파라미터 튜닝 적용 버전  
**데이터 버전**: 선형보간법 결측치 보완 데이터
