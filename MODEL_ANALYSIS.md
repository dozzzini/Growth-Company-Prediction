# 성장 기업 예측 모델 분석 보고서

## 📊 실행 일자
- 분석 일자: 2026년 1월 14일
- 모델 버전: 하이퍼파라미터 튜닝 적용 버전

---

## 🎯 프로젝트 목표

**목표**: 2023년 말 재무데이터를 기반으로 2024년 매출액 성장률이 상위 30%에 속할 기업을 예측

**비즈니스 가치**:
- 성장 가능성이 높은 기업 조기 발굴
- 투자 포트폴리오 최적화
- 리스크 관리 및 기회 포착

---

## 📈 전체 프로세스 흐름

```
[1단계] 피처 생성 (field_per_feture.py)
    ↓
재무정보_final_imputed.csv (2016~2024년 데이터)
    ↓
롤링 패널 방식으로 피처 생성
    ↓
growth_features_rolling.csv (2,335개 샘플, 12개 피처)
    ↓
[2단계] 타겟 변수 생성 (모델링 코드 내부)
    ↓
각 연도별 매출액 성장률 계산 → 상위 30% 기준으로 이진 분류
    ↓
[3단계] 하이퍼파라미터 튜닝 (Optuna)
    ↓
50 trials로 최적 파라미터 탐색
    ↓
[4단계] 모델 학습 (LightGBM / XGBoost)
    ↓
Train: 2019~2022년 말 피처 (1,784개)
Test: 2023년 말 피처 → 2024년 예측 (446개)
    ↓
[5단계] 예측 결과 및 평가
    ↓
test_predictions_2024.csv (2024년 상위 30% 기업 예측)
```

---

## 🔄 데이터 구조

### 롤링 패널 데이터 구조

| 피처 시점 | 사용하는 데이터 | 타겟 시점 | 용도 |
|---------|---------------|---------|------|
| 2019년 말 | 2017~2019년 재무데이터 | 2020년 성장여부 | Train |
| 2020년 말 | 2018~2020년 재무데이터 | 2021년 성장여부 | Train |
| 2021년 말 | 2019~2021년 재무데이터 | 2022년 성장여부 | Train |
| 2022년 말 | 2020~2022년 재무데이터 | 2023년 성장여부 | Train |
| 2023년 말 | 2021~2023년 재무데이터 | **2024년 성장여부** | **Test** |

### 데이터 분할
- **Train 데이터**: 1,784개 (2019~2022년 말 피처)
  - Train/Validation 분리: 80/20 (1,427개 / 357개)
- **Test 데이터**: 446개 (2023년 말 피처 → 2024년 예측)

---

## 📊 사용된 피처 (12개)

### 성장 관련 피처
1. **revenue_t1**: 현재 규모 (feature_year 매출액)
2. **cagr_2y**: 중기 성장 속도 (2년간 연평균 성장률)
3. **growth_recent**: 최근 모멘텀 (최근 1년간 성장률)
4. **growth_acceleration**: 성장 가속/감속
5. **growth_volatility**: 성장 안정성 (성장률 변동성)

### 수익성 관련 피처
6. **profitable_years**: 수익 안정성 (최근 2년 중 영업이익 > 0인 연도 수)
7. **operating_margin**: 영업이익률 (영업이익 / 매출액)

### 투자 관련 피처
8. **capex_intensity**: 투자 강도 (CAPEX / 매출액)
9. **capex_trend**: 투자 추세 (CAPEX 증가/감소 추세)
10. **capex_vs_industry**: 업종 대비 투자 수준

### 재무 안정성 관련 피처
11. **debt_ratio**: 부채비율 (부채총계 / 자본총계)
12. **rnd_intensity**: R&D 집중도 (연구개발비 / 매출액)

---

## 🎛️ 하이퍼파라미터 튜닝

### 튜닝 방법
- **라이브러리**: Optuna (Bayesian Optimization)
- **목표 지표**: ROC-AUC (최대화)
- **Trials**: 50회
- **검증 방법**: Validation Set을 사용한 Early Stopping

### LightGBM 최적 하이퍼파라미터

```
objective: binary
metric: binary_logloss
boosting_type: gbdt
num_leaves: 35
learning_rate: 0.0319
feature_fraction: 0.7766
bagging_fraction: 0.5612
bagging_freq: 7
min_child_samples: 61
min_child_weight: 0.0829
reg_alpha: 1.7891
reg_lambda: 4.4537
max_depth: 14
random_state: 42
```

**주요 특징**:
- 낮은 학습률 (0.0319)로 안정적인 학습
- 높은 정규화 (reg_lambda: 4.45)로 과적합 방지
- 깊은 트리 (max_depth: 14)로 복잡한 패턴 학습

### XGBoost 최적 하이퍼파라미터

```
objective: binary:logistic
eval_metric: logloss
booster: gbtree
max_depth: 3
learning_rate: 0.0468
subsample: 0.7196
colsample_bytree: 0.7636
min_child_weight: 0.5718
gamma: 0.9309
reg_alpha: 0.0943
reg_lambda: 0.0066
random_state: 42
```

**주요 특징**:
- 얕은 트리 (max_depth: 3)로 단순한 모델
- 중간 수준의 학습률 (0.0468)
- 낮은 정규화로 유연한 학습

---

## 📈 모델 성능 분석

### LightGBM 모델 성능 (2023년 말 피처 → 2024년 예측)

| 지표 | 값 | 해석 |
|------|-----|------|
| **Accuracy** | 70.63% | 전체 예측 중 70.63% 정확 |
| **Precision** | 51.47% | 상위 30%로 예측한 것 중 51.47%가 실제 상위 30% |
| **Recall** | 26.32% | 실제 상위 30% 중 26.32%를 찾아냄 |
| **F1-Score** | 34.83% | Precision과 Recall의 균형 |
| **ROC-AUC** | 0.6637 | 랜덤(0.5)보다 우수한 분류 능력 |

**Confusion Matrix**:
```
                예측
실제      하위 70%   상위 30%
하위 70%    280        33
상위 30%     98        35
```

- **True Positive (35)**: 상위 30%를 정확히 예측
- **False Negative (98)**: 상위 30%를 놓침 (개선 필요)
- **False Positive (33)**: 하위 70%를 상위로 잘못 예측
- **True Negative (280)**: 하위 70%를 정확히 예측

**예측 분포**:
- 상위 30%로 예측: 68개
- 실제 상위 30%: 133개
- 총 기업 수: 446개

### XGBoost 모델 성능 (2023년 말 피처 → 2024년 예측)

| 지표 | 값 | 해석 |
|------|-----|------|
| **Accuracy** | 68.61% | 전체 예측 중 68.61% 정확 |
| **Precision** | 46.07% | 상위 30%로 예측한 것 중 46.07%가 실제 상위 30% |
| **Recall** | 30.83% | 실제 상위 30% 중 30.83%를 찾아냄 |
| **F1-Score** | 36.94% | Precision과 Recall의 균형 |
| **ROC-AUC** | 0.6333 | 랜덤(0.5)보다 우수한 분류 능력 |

**Confusion Matrix**:
```
                예측
실제      하위 70%   상위 30%
하위 70%    265        48
상위 30%     92        41
```

- **True Positive (41)**: 상위 30%를 정확히 예측
- **False Negative (92)**: 상위 30%를 놓침
- **False Positive (48)**: 하위 70%를 상위로 잘못 예측
- **True Negative (265)**: 하위 70%를 정확히 예측

**예측 분포**:
- 상위 30%로 예측: 89개
- 실제 상위 30%: 133개
- 총 기업 수: 446개

### 모델 비교

| 지표 | LightGBM | XGBoost | 우수 모델 |
|------|----------|---------|----------|
| Accuracy | 70.63% | 68.61% | **LightGBM** |
| Precision | 51.47% | 46.07% | **LightGBM** |
| Recall | 26.32% | 30.83% | **XGBoost** |
| F1-Score | 34.83% | 36.94% | **XGBoost** |
| ROC-AUC | 0.6637 | 0.6333 | **LightGBM** |

**종합 평가**:
- **LightGBM**: Accuracy와 Precision, ROC-AUC에서 우수 → 정확한 예측에 강점
- **XGBoost**: Recall과 F1-Score에서 우수 → 더 많은 상위 30% 기업을 찾아냄

---

## 🔍 피처 중요도 분석

### LightGBM 피처 중요도 (상위 10개)

1. **growth_volatility** (687.07): 성장 안정성이 가장 중요
2. **operating_margin** (495.86): 영업이익률이 두 번째로 중요
3. **revenue_t1** (486.93): 현재 규모가 세 번째로 중요
4. **capex_vs_industry** (456.29): 업종 대비 투자 수준
5. **debt_ratio** (448.69): 부채비율
6. **growth_recent** (426.87): 최근 모멘텀
7. **capex_trend** (425.96): 투자 추세
8. **rnd_intensity** (407.24): R&D 집중도
9. **cagr_2y** (404.44): 중기 성장 속도
10. **capex_intensity** (357.91): 투자 강도

**인사이트**:
- 성장 안정성(growth_volatility)이 가장 중요한 피처
- 수익성(operating_margin)과 규모(revenue_t1)도 중요
- 투자 관련 피처들이 높은 중요도를 보임

### XGBoost 피처 중요도 (상위 10개)

1. **growth_volatility** (2.81): 성장 안정성
2. **growth_recent** (2.51): 최근 모멘텀
3. **revenue_t1** (2.32): 현재 규모
4. **rnd_intensity** (2.25): R&D 집중도
5. **capex_vs_industry** (2.23): 업종 대비 투자 수준
6. **capex_intensity** (2.15): 투자 강도
7. **capex_trend** (2.14): 투자 추세
8. **growth_acceleration** (2.11): 성장 가속/감속
9. **cagr_2y** (2.05): 중기 성장 속도
10. **debt_ratio** (1.97): 부채비율

**인사이트**:
- 두 모델 모두 성장 안정성을 가장 중요하게 평가
- 성장 관련 피처들이 전반적으로 높은 중요도

---

## 💡 모델 해석 및 활용 방법

### 예측 확률 해석

**predicted_probability** 값에 따른 해석:

| 확률 범위 | 해석 | 행동 권장사항 |
|----------|------|--------------|
| 0.7 이상 | 매우 높은 확률로 상위 30% | 투자 후보 1순위, 집중 검토 |
| 0.5~0.7 | 상위 30% 가능성 있음 | 추가 검토 필요, 리스크 관리 |
| 0.3~0.5 | 불확실 | 신중한 판단 필요 |
| 0.3 미만 | 하위 70% 가능성 높음 | 우선순위 낮음 |

### 실제 활용 시나리오

#### 시나리오 1: 투자 포트폴리오 구성
```
1. predicted_probability가 0.7 이상인 기업 선정
2. 각 기업의 재무제표 추가 검토
3. 업종별 분산 투자
4. 정기적인 모니터링 및 재평가
```

#### 시나리오 2: 리스크 관리
```
1. predicted_probability가 0.5~0.7인 기업
2. 추가 재무 지표 검토
3. 업종 동향 분석
4. 단계적 투자 결정
```

#### 시나리오 3: 모델 성과 평가
```
1. predicted_top30과 actual_top30 비교
2. 정확히 예측한 기업 분석
3. 놓친 기업(False Negative) 분석
4. 모델 개선 방향 도출
```

---

## 📊 성능 개선 분석

### 하이퍼파라미터 튜닝 전후 비교

#### LightGBM
| 지표 | 튜닝 전 | 튜닝 후 | 개선 |
|------|---------|---------|------|
| Accuracy | 69.28% | 70.63% | +1.35%p |
| Precision | 47.56% | 51.47% | +3.91%p |
| Recall | 29.32% | 26.32% | -3.00%p |
| F1-Score | 36.28% | 34.83% | -1.45%p |
| ROC-AUC | 0.6449 | 0.6637 | +0.0188 |

**분석**:
- Accuracy와 Precision이 개선됨 → 더 정확한 예측
- Recall은 약간 감소했으나 Precision 향상으로 전체적으로 개선
- ROC-AUC가 0.66 수준으로 향상

#### XGBoost
| 지표 | 튜닝 전 | 튜닝 후 | 개선 |
|------|---------|---------|------|
| Accuracy | 63.04% | 68.61% | +5.57%p |
| Precision | 20.37% | 46.07% | +25.70%p |
| Recall | 10.58% | 30.83% | +20.25%p |
| F1-Score | 13.92% | 36.94% | +23.02%p |
| ROC-AUC | 0.5291 | 0.6333 | +0.1042 |

**분석**:
- 모든 지표에서 크게 개선됨
- 특히 Precision과 Recall이 크게 향상
- ROC-AUC가 0.53에서 0.63으로 향상

---

## 🎯 모델의 강점과 한계

### 강점

1. **하이퍼파라미터 튜닝 효과**
   - XGBoost의 경우 모든 지표에서 크게 개선
   - LightGBM도 Accuracy와 Precision 향상

2. **피처 중요도 분석**
   - 성장 안정성, 수익성, 투자 관련 피처가 중요
   - 해석 가능한 모델

3. **실용적 활용 가능**
   - 확률 기반 예측으로 리스크 관리 가능
   - 투자 의사결정 지원 도구로 활용 가능

### 한계 및 개선 필요 사항

1. **Recall이 낮음**
   - LightGBM: 26.32%, XGBoost: 30.83%
   - 실제 상위 30% 기업의 약 70%를 놓침
   - **개선 방안**: 임계값 조정, 피처 추가, 앙상블 모델

2. **False Negative가 많음**
   - LightGBM: 98개, XGBoost: 92개
   - 상위 30% 기업을 놓치는 경우가 많음
   - **개선 방안**: Recall 향상을 위한 모델 개선

3. **ROC-AUC 개선 여지**
   - LightGBM: 0.6637, XGBoost: 0.6333
   - 더 높은 분류 능력 확보 필요
   - **개선 방안**: 피처 엔지니어링, 앙상블, 딥러닝 모델 시도

---

## 🔧 개선 방안

### 단기 개선 방안

1. **임계값 조정**
   - 현재: 0.5 기준
   - 개선: Recall 향상을 위해 0.4~0.45로 조정 검토

2. **피처 추가**
   - 업종별 성장률
   - 시장 점유율
   - 경영진 변동
   - 특허 수

3. **앙상블 모델**
   - LightGBM + XGBoost 앙상블
   - Voting 또는 Stacking 적용

### 중장기 개선 방안

1. **딥러닝 모델 시도**
   - Neural Network 기반 모델
   - TabNet, NODE 등

2. **시계열 특성 반영**
   - LSTM, GRU 등 시계열 모델
   - 시계열 패턴 분석

3. **외부 데이터 통합**
   - 뉴스 감성 분석
   - SNS 데이터
   - 산업 동향 데이터

---

## 📝 결론 및 권장사항

### 주요 결론

1. **모델 성능**
   - 하이퍼파라미터 튜닝으로 성능 개선
   - LightGBM이 Accuracy와 Precision에서 우수
   - XGBoost가 Recall과 F1-Score에서 우수

2. **비즈니스 활용**
   - 투자 후보 선정에 활용 가능
   - 확률 기반 리스크 관리 가능
   - 정기적인 모델 재학습 필요

3. **개선 필요**
   - Recall 향상이 시급
   - 더 많은 상위 30% 기업을 찾아내는 것이 중요

### 권장 모델

**LightGBM 모델 권장**:
- Accuracy와 Precision이 높아 정확한 예측에 강점
- ROC-AUC가 더 높음
- False Positive가 적어 리스크 관리에 유리

**활용 시나리오**:
- 정확한 예측이 중요한 경우: LightGBM 사용
- 더 많은 기업을 찾아내는 것이 중요한 경우: XGBoost 사용
- 최고 성능을 원하는 경우: 두 모델 앙상블 사용

---

## 📎 참고 자료

- 피처 생성 코드: `feature/field_per/field_per_feture.py`
- LightGBM 모델: `model/LightGBM/LightGBM.py`
- XGBoost 모델: `model/XGBoost/XGBoost.py`
- 최적 하이퍼파라미터: `model/*/best_params.txt`
- 예측 결과: `model/*/test_predictions_2024.csv`

---

**작성일**: 2026년 1월 14일  
**모델 버전**: 하이퍼파라미터 튜닝 적용 버전
